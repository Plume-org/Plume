@use templates::base;
@use template_utils::*;
@use routes::*;

@(ctx: BaseContext, now: &str)

@:base(ctx, "Search", {}, {}, {
  <h1>@i18n!(ctx.1, "Search")</h1>
  <form method="get" id="form">
    <input id="q" name="q" placeholder="@i18n!(ctx.1, "Your query")" type="search">
    <br/>
    <details>
        <summary>@i18n!(ctx.1, "Advanced search")</summary>
        @input!(ctx.1, title    (text), "Title matching these words", "")
        @input!(ctx.1, subtitle (text), "Subtitle matching these words", "")
        @input!(ctx.1, content  (text), "Content matching these words", "")
	    @input!(ctx.1, after    (date), "From this date", &format!("max={}", now))
        @input!(ctx.1, before   (date), "To this date", &format!("max={}", now))

        @input!(ctx.1, tag      (text), "Containing these tags", "")
        @input!(ctx.1, instance (text), "Posted in one of these instances", "")
        @input!(ctx.1, author   (text), "Posted by one of these authors", "")
        @input!(ctx.1, blog     (text), "Posted in one of these blogs", "")
        @input!(ctx.1, lang     (text), "Written in this language", "")
        @input!(ctx.1, license  (text), "Using this license", "")
    </details>
    <input type="submit" value="@i18n!(ctx.1, "Search")"/>
  </form>
  <script src="@uri!(static_files: file = "js/search.js")"></script>
})
