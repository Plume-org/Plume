@use templates::{base, partials::post_card};
@use template_utils::*;
@use plume_models::posts::Post;
@use plume_models::instance::Instance;

@(ctx: BaseContext, instance: Instance, articles: Vec<Post>, page: i32, n_pages: i32)

@:base(ctx, i18n!(ctx.1, "Articles from {}"; instance.name.clone()).as_str(), {}, {}, {
  <h1>@i18n!(ctx.1, "Articles from {}"; instance.name)</h1>

    @if let Some(_) = ctx.2 {
        @tabs(&[
            ("/", i18n!(ctx.1, "Latest articles"), false),
            ("/feed", i18n!(ctx.1, "Your feed"), false),
            ("/federated", i18n!(ctx.1, "Federated feed"), false),
            ("/local", i18n!(ctx.1, "Local feed"), true),
        ])
    } else {
        @tabs(&[
              ("/", i18n!(ctx.1, "Latest articles"), false),
              ("/federated", i18n!(ctx.1, "Federated feed"), false),
              ("/local", i18n!(ctx.1, "Local feed"), true),
        ])
    }

    <div class="cards">
        @for article in articles {
            @:post_card(ctx, article)
        }
    </div>
    @paginate(ctx.1, page, n_pages)
})
